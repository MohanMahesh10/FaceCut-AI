import{t as O,a as R,d as Q}from"../chunks/CAfeTLpn.js";import"../chunks/CxjEBsaR.js";import{s as ne,j as N,Q as Qe,$ as Xe,k as Ze,i as Je,g as a,a3 as X,l as ea,m as be,n as ie,t as $,V as aa,o as Ce,p as Ue,q as ta,Z as Se,O as ra,a4 as U,a5 as ye,a6 as le,L as Ae,a7 as sa,a8 as na,a9 as ia,Y as la,aa as oa,ab as va,ac as ca,ad as da,R as fa,ae as ua,af as pa,ag as _a,ah as ma,A as ha,B as k,C as ga,D as _,G as L,F as p,ai as o,z as wa,aj as oe}from"../chunks/BM1BTXuY.js";import{e as W,s as P}from"../chunks/Xok0j5NW.js";import{i as M,b as Ee}from"../chunks/JwsTIU_o.js";import{i as xa}from"../chunks/CTH2xSWl.js";import{o as ba}from"../chunks/C9S244t5.js";function ya(s,e){return e}function Aa(s,e,t,n){for(var v=[],d=e.length,f=0;f<d;f++)ia(e[f].e,v,!0);var m=d>0&&v.length===0&&t!==null;if(m){var u=t.parentNode;la(u),u.append(t),n.clear(),F(s,e[0].prev,e[d-1].next)}oa(v,()=>{for(var g=0;g<d;g++){var i=e[g];m||(n.delete(i.k),F(s,i.prev,i.next)),va(i.e,!m)}})}function Ea(s,e,t,n,v,d=null){var f=s,m={flags:e,items:new Map,first:null};{var u=s;f=N?ne(Qe(u)):u.appendChild(Xe())}N&&Ze();var g=null,i=!1,b=X(()=>{var c=t();return ra(c)?c:c==null?[]:Se(c)});Je(()=>{var c=a(b),x=c.length;if(i&&x===0)return;i=x===0;let h=!1;if(N){var D=f.data===ea;D!==(x===0)&&(f=be(),ne(f),ie(!1),h=!0)}if(N){for(var S=null,w,I=0;I<x;I++){if($.nodeType===8&&$.data===aa){f=$,h=!0,ie(!1);break}var H=c[I],T=n(H,I);w=Te($,m,S,null,H,T,I,v,e,t),m.items.set(T,w),S=w}x>0&&ne(be())}N||Ia(c,m,f,v,e,n,t),d!==null&&(x===0?g?Ce(g):g=Ue(()=>d(f)):g!==null&&ta(g,()=>{g=null})),h&&ie(!0),a(b)}),N&&(f=$)}function Ia(s,e,t,n,v,d,f){var m=s.length,u=e.items,g=e.first,i=g,b,c=null,x=[],h=[],D,S,w,I;for(I=0;I<m;I+=1){if(D=s[I],S=d(D,I),w=u.get(S),w===void 0){var H=i?i.e.nodes_start:t;c=Te(H,e,c,c===null?e.first:c.next,D,S,I,n,v,f),u.set(S,c),x=[],h=[],i=c.next;continue}if(La(w,D,I),(w.e.f&le)!==0&&Ce(w.e),w!==i){if(b!==void 0&&b.has(w)){if(x.length<h.length){var T=h[0],C;c=T.prev;var Y=x[0],j=x[x.length-1];for(C=0;C<x.length;C+=1)Ie(x[C],T,t);for(C=0;C<h.length;C+=1)b.delete(h[C]);F(e,Y.prev,j.next),F(e,c,Y),F(e,j,T),i=T,c=j,I-=1,x=[],h=[]}else b.delete(w),Ie(w,i,t),F(e,w.prev,w.next),F(e,w,c===null?e.first:c.next),F(e,c,w),c=w;continue}for(x=[],h=[];i!==null&&i.k!==S;)(i.e.f&le)===0&&(b??(b=new Set)).add(i),h.push(i),i=i.next;if(i===null)continue;w=i}x.push(w),c=w,i=w.next}if(i!==null||b!==void 0){for(var z=b===void 0?[]:Se(b);i!==null;)(i.e.f&le)===0&&z.push(i),i=i.next;var q=z.length;if(q>0){var Z=m===0?t:null;Aa(e,z,Z,u)}}Ae.first=e.first&&e.first.e,Ae.last=c&&c.e}function La(s,e,t,n){na(s.v,e),s.i=t}function Te(s,e,t,n,v,d,f,m,u,g){var i=(u&ca)!==0,b=(u&da)===0,c=i?b?U(v):ye(v):v,x=(u&sa)===0?f:ye(f),h={i:x,v:c,k:d,a:null,e:null,prev:t,next:n};try{return h.e=Ue(()=>m(s,c,x,g),N),h.e.prev=t&&t.e,h.e.next=n&&n.e,t===null?e.first=h:(t.next=h,t.e.next=h.e),n!==null&&(n.prev=h,n.e.prev=h.e),h}finally{}}function Ie(s,e,t){for(var n=s.next?s.next.e.nodes_start:t,v=e?e.e.nodes_start:t,d=s.e.nodes_start;d!==n;){var f=fa(d);v.before(d),d=f}}function F(s,e,t){e===null?s.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Ra(s,e,t){var n=s==null?"":""+s;return n=n?n+" "+e:e,n===""?null:n}function Ca(s,e,t,n,v,d){var f=s.__className;if(N||f!==t||f===void 0){var m=Ra(t,n);(!N||m!==s.getAttribute("class"))&&(m==null?s.removeAttribute("class"):s.className=m),s.__className=t}return d}const Ua=Symbol("is custom element"),Sa=Symbol("is html");function ve(s,e,t,n){var v=Ta(s);N&&(v[e]=s.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&s.nodeName==="LINK")||v[e]!==(v[e]=t)&&(e==="loading"&&(s[ma]=t),t==null?s.removeAttribute(e):typeof t!="string"&&ka(s).includes(e)?s[e]=t:s.setAttribute(e,t))}function Ta(s){return s.__attributes??(s.__attributes={[Ua]:s.nodeName.includes("-"),[Sa]:s.namespaceURI===ua})}var Le=new Map;function ka(s){var e=Le.get(s.nodeName);if(e)return e;Le.set(s.nodeName,e=[]);for(var t,n=s,v=Element.prototype;v!==n;){t=_a(n);for(var d in t)t[d].set&&e.push(d);n=pa(n)}return e}function Re(s){return function(...e){var t=e[0];return t.preventDefault(),s==null?void 0:s.apply(this,e)}}const Na="https://your-backend-url.com";var Oa=O('<div class="camera-container svelte-1xpow6n"><video autoplay playsinline="" aria-label="Live camera preview for face analysis" class="svelte-1xpow6n"></video> <div class="camera-btn-row svelte-1xpow6n"><button class="secondary-button svelte-1xpow6n">Capture Image</button> <button class="secondary-button svelte-1xpow6n">Stop Camera</button></div> <canvas style="display: none;"></canvas></div>',2),Ma=O('<button class="secondary-button svelte-1xpow6n">Start Camera</button>'),Da=O('<div class="image-preview-container svelte-1xpow6n"><img alt="Captured preview for analysis" class="image-preview svelte-1xpow6n"></div>'),Ha=O("<p> </p>"),Ba=O('<h2 class="svelte-1xpow6n">Detected Face Shape: <span class="svelte-1xpow6n"> </span></h2>'),Fa=O('<img class="haircut-image svelte-1xpow6n">'),za=O('<div class="haircut-card svelte-1xpow6n"><!> <div class="haircut-info svelte-1xpow6n"><h4 class="svelte-1xpow6n"> </h4> <p class="svelte-1xpow6n"> </p></div></div>'),Pa=O('<h3 class="svelte-1xpow6n">Recommended Haircuts:</h3> <div class="haircut-grid svelte-1xpow6n"></div>',1),Ya=O("<p> </p>"),ja=O('<div class="main-bg svelte-1xpow6n"><div class="container svelte-1xpow6n"><header class="main-header svelte-1xpow6n"><div class="logo-circle svelte-1xpow6n"><span>✂️</span></div> <div><h1 class="svelte-1xpow6n">FaceCut AI</h1> <p class="svelte-1xpow6n">Analyze your face shape and get personalized haircut recommendations using AI.</p></div></header> <div class="main-content svelte-1xpow6n"><section class="upload-section svelte-1xpow6n"><div class="card upload-card svelte-1xpow6n"><div class="camera-upload-options svelte-1xpow6n"><!> <div class="or-divider svelte-1xpow6n">OR</div> <div class="file-upload-container svelte-1xpow6n"><form><div class="file-input-group svelte-1xpow6n"><input type="file" accept="image/*" id="fileInput" class="file-input svelte-1xpow6n"> <label for="fileInput" class="custom-button svelte-1xpow6n"><!></label></div></form></div></div> <div class="analyze-button-container svelte-1xpow6n"><button type="submit" class="primary-button svelte-1xpow6n"><!></button></div> <!> <!></div></section> <section class="results-section side-by-side-results svelte-1xpow6n"><div class="card results-card svelte-1xpow6n"><!> <!></div></section></div> <footer class="footer svelte-1xpow6n"><span> </span></footer></div></div>');function Xa(s,e){ha(e,!1);const t=Na;let n=U(null),v=U(""),d=U(""),f=U([]),m=U(!1),u=U(""),g=U(),i=U(),b=U(null),c=U(null);async function x(){try{o(b,await navigator.mediaDevices.getUserMedia({video:!0})),a(g)&&oe(g,a(g).srcObject=a(b)),o(v,""),o(n,null),o(u,""),o(c,null),o(d,""),o(f,[])}catch(r){console.error("Error accessing camera: ",r),o(v,"Error accessing camera. Please ensure you have a webcam and granted permission."),o(b,null)}}function h(){a(b)&&(a(b).getTracks().forEach(r=>r.stop()),o(b,null))}function D(){if(a(g)&&a(i)){const r=a(i).getContext("2d");oe(i,a(i).width=a(g).videoWidth),oe(i,a(i).height=a(g).videoHeight),r.drawImage(a(g),0,0,a(i).width,a(i).height),a(i).toBlob(l=>{o(c,l),a(u)&&URL.revokeObjectURL(a(u)),o(u,URL.createObjectURL(l)),o(n,null),o(v,"Image Captured!")},"image/png")}else o(v,"Camera stream not active.")}async function S(r){o(n,r.target.files[0]),a(n)?(a(u)&&URL.revokeObjectURL(a(u)),o(u,URL.createObjectURL(a(n))),o(v,""),o(d,""),o(f,[]),h(),o(c,null)):(a(u)&&URL.revokeObjectURL(a(u)),o(u,""),o(v,""),o(d,""),o(f,[]),o(n,null),o(c,null))}function w(r){if(!r)return"";if(/^https?:\/\//i.test(r))return r;const l=r.replace(/^\/+/,"");return`${t.endsWith("/")?t.slice(0,-1):t}/${l}`}async function I(){let r=a(n)||a(c);if(!r){o(v,"Please select an image file or capture an image from camera.");return}const l=new FormData;l.append("file",r,a(n)?a(n).name:"captured_image.png"),o(v,""),o(d,""),o(f,[]),o(m,!0);try{const y=t.endsWith("/")?t.slice(0,-1):t,A=await fetch(`${y}/uploadimage/`,{method:"POST",body:l});if(A.ok){const E=await A.json();o(d,E.face_shape),o(f,E.recommended_haircuts),o(v,"Analysis Complete!")}else{const E=await A.json();o(v,`Error: ${E.detail||A.statusText}`)}}catch(y){o(v,`An error occurred: ${y.message}`)}finally{o(m,!1)}}ba(()=>{a(u)&&URL.revokeObjectURL(a(u)),h()}),xa();var H=ja(),T=_(H),C=L(_(T),2),Y=_(C),j=_(Y),z=_(j),q=_(z);{var Z=r=>{var l=Oa(),y=_(l);y.muted=!0,Ee(y,V=>o(g,V),()=>a(g));var A=L(y,2),E=_(A),B=L(E,2);p(A);var K=L(A,2);Ee(K,V=>o(i,V),()=>a(i)),p(l),k(()=>{E.disabled=a(m),B.disabled=a(m)}),W("click",E,D),W("click",B,h),R(r,l)},ke=r=>{var l=Ma();k(()=>l.disabled=a(m)),W("click",l,x),R(r,l)};M(q,r=>{a(b)?r(Z):r(ke,!1)})}var ce=L(q,4),J=_(ce),de=_(J),ee=_(de),fe=L(ee,2),Ne=_(fe);{var Oe=r=>{var l=Q();k(()=>P(l,`Image Selected: ${a(n).name??""}`)),R(r,l)},Me=r=>{var l=Q("Upload Image");R(r,l)};M(Ne,r=>{a(n)?r(Oe):r(Me,!1)})}p(fe),p(de),p(J),p(ce),p(z);var ae=L(z,2),G=_(ae),De=_(G);{var He=r=>{var l=Q("Analyzing...");R(r,l)},Be=r=>{var l=Q("Analyze Face Shape");R(r,l)};M(De,r=>{a(m)?r(He):r(Be,!1)})}p(G),p(ae);var ue=L(ae,2);{var Fe=r=>{var l=Da(),y=_(l);p(l),k(()=>ve(y,"src",a(u))),R(r,l)};M(ue,r=>{a(u)&&r(Fe)})}var ze=L(ue,2);{var Pe=r=>{var l=Ha(),y=_(l,!0);p(l),k(A=>{Ca(l,1,`message ${A??""}`,"svelte-1xpow6n"),P(y,a(v))},[()=>a(v).startsWith("Error")?"error":"success"],X),R(r,l)};M(ze,r=>{a(v)&&r(Pe)})}p(j),p(Y);var pe=L(Y,2),_e=_(pe),me=_(_e);{var Ye=r=>{var l=Ba(),y=L(_(l)),A=_(y,!0);p(y),p(l),k(()=>P(A,a(d))),R(r,l)};M(me,r=>{a(d)&&r(Ye)})}var je=L(me,2);{var We=r=>{var l=Pa(),y=L(wa(l),2);Ea(y,5,()=>a(f),ya,(A,E)=>{var B=za(),K=_(B);{var V=re=>{var se=Fa();k(Ke=>{ve(se,"src",Ke),ve(se,"alt",a(E).name)},[()=>w(a(E).image)],X),R(re,se)};M(K,re=>{a(E).image&&re(V)})}var we=L(K,2),te=_(we),qe=_(te,!0);p(te);var xe=L(te,2),Ge=_(xe,!0);p(xe),p(we),p(B),k(()=>{P(qe,a(E).name),P(Ge,a(E).description)}),R(A,B)}),p(y),R(r,l)},Ve=(r,l)=>{{var y=A=>{var E=Ya(),B=_(E);p(E),k(()=>P(B,`No haircut recommendations found for ${a(d)??""} face shape yet. Check back later!`)),R(A,E)};M(r,A=>{a(d)&&a(f).length===0&&!a(m)&&A(y)},l)}};M(je,r=>{a(f).length>0?r(We):r(Ve,!1)})}p(_e),p(pe),p(C);var he=L(C,2),ge=_(he),$e=_(ge);p(ge),p(he),p(T),p(H),k(r=>{ee.disabled=a(m),G.disabled=a(m)||!a(n)&&!a(c),P($e,`© ${r??""} MOHAN MAHESH. All rights reserved.`)},[()=>new Date().getFullYear()],X),W("change",ee,S),W("submit",J,Re(I)),W("click",G,Re(I)),R(s,H),ga()}export{Xa as component};
