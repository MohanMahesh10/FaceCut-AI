import{t as O,a as L,d as K}from"../chunks/CAfeTLpn.js";import"../chunks/CxjEBsaR.js";import{s as se,j as N,Q as We,$ as Ke,k as Qe,i as Xe,g as a,a3 as ve,l as Ze,m as be,n as ne,t as q,V as Je,o as Ce,p as Se,q as ea,Z as Te,O as aa,a4 as T,a5 as ye,a6 as ie,L as Ae,a7 as ta,a8 as ra,a9 as sa,Y as na,aa as ia,ab as la,ac as oa,ad as va,R as ca,ae as da,af as fa,ag as ua,ah as pa,A as _a,B as k,C as ma,D as _,G as I,F as p,ai as o,z as ha,aj as le}from"../chunks/BM1BTXuY.js";import{e as j,s as z}from"../chunks/Xok0j5NW.js";import{i as M,b as Ee}from"../chunks/JwsTIU_o.js";import{i as ga}from"../chunks/CTH2xSWl.js";import{o as wa}from"../chunks/C9S244t5.js";function xa(t,e){return e}function ba(t,e,r,n){for(var v=[],d=e.length,f=0;f<d;f++)sa(e[f].e,v,!0);var m=d>0&&v.length===0&&r!==null;if(m){var u=r.parentNode;na(u),u.append(r),n.clear(),P(t,e[0].prev,e[d-1].next)}ia(v,()=>{for(var w=0;w<d;w++){var i=e[w];m||(n.delete(i.k),P(t,i.prev,i.next)),la(i.e,!m)}})}function ya(t,e,r,n,v,d=null){var f=t,m={flags:e,items:new Map,first:null};{var u=t;f=N?se(We(u)):u.appendChild(Ke())}N&&Qe();var w=null,i=!1,b=ve(()=>{var c=r();return aa(c)?c:c==null?[]:Te(c)});Xe(()=>{var c=a(b),x=c.length;if(i&&x===0)return;i=x===0;let h=!1;if(N){var D=f.data===Ze;D!==(x===0)&&(f=be(),se(f),ne(!1),h=!0)}if(N){for(var U=null,g,A=0;A<x;A++){if(q.nodeType===8&&q.data===Je){f=q,h=!0,ne(!1);break}var B=c[A],S=n(B,A);g=Ue(q,m,U,null,B,S,A,v,e,r),m.items.set(S,g),U=g}x>0&&se(be())}N||Aa(c,m,f,v,e,n,r),d!==null&&(x===0?w?Ce(w):w=Se(()=>d(f)):w!==null&&ea(w,()=>{w=null})),h&&ne(!0),a(b)}),N&&(f=q)}function Aa(t,e,r,n,v,d,f){var m=t.length,u=e.items,w=e.first,i=w,b,c=null,x=[],h=[],D,U,g,A;for(A=0;A<m;A+=1){if(D=t[A],U=d(D,A),g=u.get(U),g===void 0){var B=i?i.e.nodes_start:r;c=Ue(B,e,c,c===null?e.first:c.next,D,U,A,n,v,f),u.set(U,c),x=[],h=[],i=c.next;continue}if(Ea(g,D,A),(g.e.f&ie)!==0&&Ce(g.e),g!==i){if(b!==void 0&&b.has(g)){if(x.length<h.length){var S=h[0],C;c=S.prev;var V=x[0],F=x[x.length-1];for(C=0;C<x.length;C+=1)Ie(x[C],S,r);for(C=0;C<h.length;C+=1)b.delete(h[C]);P(e,V.prev,F.next),P(e,c,V),P(e,F,S),i=S,c=F,A-=1,x=[],h=[]}else b.delete(g),Ie(g,i,r),P(e,g.prev,g.next),P(e,g,c===null?e.first:c.next),P(e,c,g),c=g;continue}for(x=[],h=[];i!==null&&i.k!==U;)(i.e.f&ie)===0&&(b??(b=new Set)).add(i),h.push(i),i=i.next;if(i===null)continue;g=i}x.push(g),c=g,i=g.next}if(i!==null||b!==void 0){for(var Y=b===void 0?[]:Te(b);i!==null;)(i.e.f&ie)===0&&Y.push(i),i=i.next;var Q=Y.length;if(Q>0){var X=m===0?r:null;ba(e,Y,X,u)}}Ae.first=e.first&&e.first.e,Ae.last=c&&c.e}function Ea(t,e,r,n){ra(t.v,e),t.i=r}function Ue(t,e,r,n,v,d,f,m,u,w){var i=(u&oa)!==0,b=(u&va)===0,c=i?b?T(v):ye(v):v,x=(u&ta)===0?f:ye(f),h={i:x,v:c,k:d,a:null,e:null,prev:r,next:n};try{return h.e=Se(()=>m(t,c,x,w),N),h.e.prev=r&&r.e,h.e.next=n&&n.e,r===null?e.first=h:(r.next=h,r.e.next=h.e),n!==null&&(n.prev=h,n.e.prev=h.e),h}finally{}}function Ie(t,e,r){for(var n=t.next?t.next.e.nodes_start:r,v=e?e.e.nodes_start:r,d=t.e.nodes_start;d!==n;){var f=ca(d);v.before(d),d=f}}function P(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function Ia(t,e,r){var n=t==null?"":""+t;return n=n?n+" "+e:e,n===""?null:n}function La(t,e,r,n,v,d){var f=t.__className;if(N||f!==r||f===void 0){var m=Ia(r,n);(!N||m!==t.getAttribute("class"))&&(m==null?t.removeAttribute("class"):t.className=m),t.__className=r}return d}const Ra=Symbol("is custom element"),Ca=Symbol("is html");function oe(t,e,r,n){var v=Sa(t);N&&(v[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||v[e]!==(v[e]=r)&&(e==="loading"&&(t[pa]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Ta(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function Sa(t){return t.__attributes??(t.__attributes={[Ra]:t.nodeName.includes("-"),[Ca]:t.namespaceURI===da})}var Le=new Map;function Ta(t){var e=Le.get(t.nodeName);if(e)return e;Le.set(t.nodeName,e=[]);for(var r,n=t,v=Element.prototype;v!==n;){r=ua(n);for(var d in r)r[d].set&&e.push(d);n=fa(n)}return e}function Re(t){return function(...e){var r=e[0];return r.preventDefault(),t==null?void 0:t.apply(this,e)}}const Ua="https://your-backend.example.com";var ka=O('<div class="camera-container svelte-1xpow6n"><video autoplay playsinline="" class="svelte-1xpow6n"></video> <div class="camera-btn-row svelte-1xpow6n"><button class="secondary-button svelte-1xpow6n">Capture Image</button> <button class="secondary-button svelte-1xpow6n">Stop Camera</button></div> <canvas style="display: none;"></canvas></div>',2),Na=O('<button class="secondary-button svelte-1xpow6n">Start Camera</button>'),Oa=O('<div class="image-preview-container svelte-1xpow6n"><img alt="Image Preview" class="image-preview svelte-1xpow6n"></div>'),Ma=O("<p> </p>"),Da=O('<h2 class="svelte-1xpow6n">Detected Face Shape: <span class="svelte-1xpow6n"> </span></h2>'),Ha=O('<img class="haircut-image svelte-1xpow6n">'),Pa=O('<div class="haircut-card svelte-1xpow6n"><!> <div class="haircut-info svelte-1xpow6n"><h4 class="svelte-1xpow6n"> </h4> <p class="svelte-1xpow6n"> </p></div></div>'),Ba=O('<h3 class="svelte-1xpow6n">Recommended Haircuts:</h3> <div class="haircut-grid svelte-1xpow6n"></div>',1),Fa=O("<p> </p>"),za=O('<div class="main-bg svelte-1xpow6n"><div class="container svelte-1xpow6n"><header class="main-header svelte-1xpow6n"><div class="logo-circle svelte-1xpow6n"><span>✂️</span></div> <div><h1 class="svelte-1xpow6n">FaceCut AI</h1> <p class="svelte-1xpow6n">Analyze your face shape and get personalized haircut recommendations using AI.</p></div></header> <div class="main-content svelte-1xpow6n"><section class="upload-section svelte-1xpow6n"><div class="card upload-card svelte-1xpow6n"><div class="camera-upload-options svelte-1xpow6n"><!> <div class="or-divider svelte-1xpow6n">OR</div> <div class="file-upload-container svelte-1xpow6n"><form><div class="file-input-group svelte-1xpow6n"><input type="file" accept="image/*" id="fileInput" class="file-input svelte-1xpow6n"> <label for="fileInput" class="custom-button svelte-1xpow6n"><!></label></div></form></div></div> <div class="analyze-button-container svelte-1xpow6n"><button type="submit" class="primary-button svelte-1xpow6n"><!></button></div> <!> <!></div></section> <section class="results-section side-by-side-results svelte-1xpow6n"><div class="card results-card svelte-1xpow6n"><!> <!></div></section></div> <footer class="footer svelte-1xpow6n"><span> </span></footer></div></div>');function Ka(t,e){_a(e,!1);const r=Ua;let n=T(null),v=T(""),d=T(""),f=T([]),m=T(!1),u=T(""),w=T(),i=T(),b=T(null),c=T(null);async function x(){try{o(b,await navigator.mediaDevices.getUserMedia({video:!0})),a(w)&&le(w,a(w).srcObject=a(b)),o(v,""),o(n,null),o(u,""),o(c,null),o(d,""),o(f,[])}catch(s){console.error("Error accessing camera: ",s),o(v,"Error accessing camera. Please ensure you have a webcam and granted permission."),o(b,null)}}function h(){a(b)&&(a(b).getTracks().forEach(s=>s.stop()),o(b,null))}function D(){if(a(w)&&a(i)){const s=a(i).getContext("2d");le(i,a(i).width=a(w).videoWidth),le(i,a(i).height=a(w).videoHeight),s.drawImage(a(w),0,0,a(i).width,a(i).height),a(i).toBlob(l=>{o(c,l),a(u)&&URL.revokeObjectURL(a(u)),o(u,URL.createObjectURL(l)),o(n,null),o(v,"Image Captured!")},"image/png")}else o(v,"Camera stream not active.")}async function U(s){o(n,s.target.files[0]),a(n)?(a(u)&&URL.revokeObjectURL(a(u)),o(u,URL.createObjectURL(a(n))),o(v,""),o(d,""),o(f,[]),h(),o(c,null)):(a(u)&&URL.revokeObjectURL(a(u)),o(u,""),o(v,""),o(d,""),o(f,[]),o(n,null),o(c,null))}async function g(){let s=a(n)||a(c);if(!s){o(v,"Please select an image file or capture an image from camera.");return}const l=new FormData;l.append("file",s,a(n)?a(n).name:"captured_image.png"),o(v,""),o(d,""),o(f,[]),o(m,!0);try{const y=await fetch(`${r}/uploadimage/`,{method:"POST",body:l});if(y.ok){const E=await y.json();o(d,E.face_shape),o(f,E.recommended_haircuts),o(v,"Analysis Complete!")}else{const E=await y.json();o(v,`Error: ${E.detail||y.statusText}`)}}catch(y){o(v,`An error occurred: ${y.message}`)}finally{o(m,!1)}}wa(()=>{a(u)&&URL.revokeObjectURL(a(u)),h()}),ga();var A=za(),B=_(A),S=I(_(B),2),C=_(S),V=_(C),F=_(V),Y=_(F);{var Q=s=>{var l=ka(),y=_(l);Ee(y,$=>o(w,$),()=>a(w));var E=I(y,2),R=_(E),H=I(R,2);p(E);var W=I(E,2);Ee(W,$=>o(i,$),()=>a(i)),p(l),k(()=>{R.disabled=a(m),H.disabled=a(m)}),j("click",R,D),j("click",H,h),L(s,l)},X=s=>{var l=Na();k(()=>l.disabled=a(m)),j("click",l,x),L(s,l)};M(Y,s=>{a(b)?s(Q):s(X,!1)})}var ce=I(Y,4),Z=_(ce),de=_(Z),J=_(de),fe=I(J,2),ke=_(fe);{var Ne=s=>{var l=K();k(()=>z(l,`Image Selected: ${a(n).name??""}`)),L(s,l)},Oe=s=>{var l=K("Upload Image");L(s,l)};M(ke,s=>{a(n)?s(Ne):s(Oe,!1)})}p(fe),p(de),p(Z),p(ce),p(F);var ee=I(F,2),G=_(ee),Me=_(G);{var De=s=>{var l=K("Analyzing...");L(s,l)},He=s=>{var l=K("Analyze Face Shape");L(s,l)};M(Me,s=>{a(m)?s(De):s(He,!1)})}p(G),p(ee);var ue=I(ee,2);{var Pe=s=>{var l=Oa(),y=_(l);p(l),k(()=>oe(y,"src",a(u))),L(s,l)};M(ue,s=>{a(u)&&s(Pe)})}var Be=I(ue,2);{var Fe=s=>{var l=Ma(),y=_(l,!0);p(l),k(E=>{La(l,1,`message ${E??""}`,"svelte-1xpow6n"),z(y,a(v))},[()=>a(v).startsWith("Error")?"error":"success"],ve),L(s,l)};M(Be,s=>{a(v)&&s(Fe)})}p(V),p(C);var pe=I(C,2),_e=_(pe),me=_(_e);{var ze=s=>{var l=Da(),y=I(_(l)),E=_(y,!0);p(y),p(l),k(()=>z(E,a(d))),L(s,l)};M(me,s=>{a(d)&&s(ze)})}var Ye=I(me,2);{var je=s=>{var l=Ba(),y=I(ha(l),2);ya(y,5,()=>a(f),xa,(E,R)=>{var H=Pa(),W=_(H);{var $=te=>{var re=Ha();k(()=>{oe(re,"src",`${r}/haircuts/${a(R).image}`),oe(re,"alt",a(R).name)}),L(te,re)};M(W,te=>{a(R).image&&te($)})}var we=I(W,2),ae=_(we),qe=_(ae,!0);p(ae);var xe=I(ae,2),Ge=_(xe,!0);p(xe),p(we),p(H),k(()=>{z(qe,a(R).name),z(Ge,a(R).description)}),L(E,H)}),p(y),L(s,l)},Ve=(s,l)=>{{var y=E=>{var R=Fa(),H=_(R);p(R),k(()=>z(H,`No haircut recommendations found for ${a(d)??""} face shape yet. Check back later!`)),L(E,R)};M(s,E=>{a(d)&&a(f).length===0&&!a(m)&&E(y)},l)}};M(Ye,s=>{a(f).length>0?s(je):s(Ve,!1)})}p(_e),p(pe),p(S);var he=I(S,2),ge=_(he),$e=_(ge);p(ge),p(he),p(B),p(A),k(s=>{J.disabled=a(m),G.disabled=a(m)||!a(n)&&!a(c),z($e,`© ${s??""} MOHAN MAHESH. All rights reserved.`)},[()=>new Date().getFullYear()],ve),j("change",J,U),j("submit",Z,Re(g)),j("click",G,Re(g)),L(t,A),ma()}export{Ka as component};
